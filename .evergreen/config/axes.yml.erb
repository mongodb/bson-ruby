axes:
  - id: "all-os"
    display_name: OS
    values:
      - id: debian
        display_name: "Debian 11"
        run_on: debian11-small
        variables:
          MACHINE: "debian11"
      - id: "ubuntu"
        display_name: "Ubuntu 22.04"
        run_on: ubuntu2204-small
        variables:
          MACHINE: "ubuntu2204"
      - id: "rhel"
        display_name: "RHEL 8.0"
        run_on: rhel80-small
        variables:
          MACHINE: "rhel80"

  - id: "special-os"
    display_name: OS
    values:
      - id: "rhel82-arm64"
        display_name: "RHEL 8.2 ARM64"
        run_on: rhel82-arm64-small
        variables:
          MACHINE: rhel82-arm64

  - id: ruby
    display_name: Ruby Version
    values:
<% %i[ mri jruby ].each do |ruby_flavor| %>
<% params[:ruby][ruby_flavor][:supported].each do |ruby| %>
      - id: <%= ruby %>
        display_name: <%= ruby %>
        variables:
           RVM_RUBY: <%= ruby %>
<% end %>
<% end %>

  - id: "as"
    display_name: ActiveSupport
    values:
      - id: "5.1"
        display_name: 5.1
        variables:
          WITH_ACTIVE_SUPPORT: "~> 5.1.0"
      - id: "5.2"
        display_name: 5.2
        variables:
          WITH_ACTIVE_SUPPORT: "~> 5.2.0"
      - id: "6.0"
        display_name: 6.0
        variables:
          WITH_ACTIVE_SUPPORT: "~> 6.0.0"
      - id: "6.1"
        display_name: 6.1
        variables:
          WITH_ACTIVE_SUPPORT: "~> 6.1.0"
      - id: "7.0"
        display_name: 7.0
        variables:
          WITH_ACTIVE_SUPPORT: "~> 7.0.0"

  - id: "compact"
    display_name: GC.compact
    values:
      - id: "on"
        display_name: with GC.compact
        variables:
          COMPACT: true
